"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[271],{9763:function(e,t,n){n.d(t,{T5:function(){return l}});var r=n(2601);let l="http://localhost:3001/api/",i=r.env.STRAPI_URL,o=r.env.STRAPI_TOKEN,a={"Content-Type":"Application/Json",Authorization:"Bearer ".concat(o)},u=async function(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"?populate=*",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"&pagination[pageSize]=1000000",l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;try{let o=i+e+n+r+l;t=await axios.get(o,{timeout:6e4,headers:a})}catch(t){if(++o<5)return await u(e,n,r,l,o)}return t.data.data}},8823:function(e,t,n){n.r(t),n.d(t,{CartProvider:function(){return u},useCart:function(){return c}});var r=n(7437),l=n(2265),i=n(2927),o=n(6412);let a=(0,l.createContext)({cart:[],open:!1,setOpen:e=>{},AddToCart:e=>{},SubFromCart:e=>{},RemoveFromCart:e=>{},CleanCart:()=>{}}),u=e=>{let{children:t}=e,[n,u]=(0,l.useState)([]),[c,d]=(0,l.useState)(!1),{reactPixel:s}=(0,i.useReactPixel)();function m(e){u(n.filter(t=>{var n;return(null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.id)!=e.id}))}return(0,l.useEffect)(()=>{d(!1);let e=JSON.parse(localStorage.getItem("cart")||"[]")||[];u((null==e?void 0:e.length)==void 0?[]:e)},[]),(0,l.useEffect)(()=>{localStorage.setItem("cart",JSON.stringify(n)),(null==n?void 0:n.length)||d(!1)},[n]),(0,r.jsx)(a.Provider,{value:{cart:n,AddToCart:function(e){let t=n.find(t=>{var n;return(null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.id)==(null==e?void 0:e.id)}),r=null;if(!t){u(r=n.concat([{item:e,cant:1}])),(0,o.Xq)(s,r);return}r=n.map(e=>{var n,r;return(null==e?void 0:null===(n=e.item)||void 0===n?void 0:n.id)!=(null==t?void 0:null===(r=t.item)||void 0===r?void 0:r.id)?e:{item:e.item,cant:e.cant+1}}),(0,o.Xq)(s,r),u(r)},SubFromCart:function(e){let t=n.find(t=>{var n;return(null==t?void 0:null===(n=t.item)||void 0===n?void 0:n.id)==(null==e?void 0:e.id)});if(t){if((null==t?void 0:t.cant)==1){m(e);return}u(n.map(e=>{var n,r;return(null==e?void 0:null===(n=e.item)||void 0===n?void 0:n.id)!=(null==t?void 0:null===(r=t.item)||void 0===r?void 0:r.id)?e:{item:e.item,cant:e.cant-1}}))}},RemoveFromCart:m,open:c,setOpen:d,CleanCart:function(){u([])}},children:t})},c=()=>(0,l.useContext)(a)},1308:function(e,t,n){n.r(t),n.d(t,{OrderProvider:function(){return o},useOrder:function(){return a}});var r=n(7437),l=n(2265);let i=(0,l.createContext)({setOrderCart:(e,t)=>{},orderCart:null,setOrderEnroll:(e,t)=>{},orderEnroll:null,cleanOrderEnroll:()=>{},cleanOrderCart:()=>{}}),o=e=>{let{children:t}=e,[n,o]=(0,l.useState)(null),[a,u]=(0,l.useState)(null);return(0,l.useEffect)(()=>{let e=JSON.parse(localStorage.getItem("order")||"{}"),t=JSON.parse(localStorage.getItem("order_cart")||"{}");(null==e?void 0:e.orderId)&&o(e),(null==t?void 0:t.orderId)&&u(t)},[]),(0,r.jsx)(i.Provider,{value:{orderCart:a,setOrderCart:function(e,t){localStorage.setItem("order_cart",JSON.stringify({orderId:e,courses:t})),u({orderId:e,courses:t})},orderEnroll:n,setOrderEnroll:function(e,t){localStorage.setItem("order",JSON.stringify({orderId:e,courses:t})),o({orderId:e,courses:t})},cleanOrderCart:function(){u(null),localStorage.removeItem("order_cart")},cleanOrderEnroll:function(){o(null),localStorage.removeItem("order")}},children:t})},a=()=>(0,l.useContext)(i)},2927:function(e,t,n){n.r(t),n.d(t,{ReactPixelProvider:function(){return o},useReactPixel:function(){return a}});var r=n(7437),l=n(2265);let i=(0,l.createContext)({setReactPixel:e=>{},reactPixel:null}),o=e=>{let{children:t}=e,[n,o]=(0,l.useState)(null);return(0,r.jsx)(i.Provider,{value:{reactPixel:n,setReactPixel:o},children:t})},a=()=>(0,l.useContext)(i)},9387:function(e,t,n){n.d(t,{Z:function(){return j}});var r=n(7437),l=n(3226),i=n(8163),o=n(2265),a=n(9804),u=n(6882),c=n(6507),d=n(2923),s=n(8786),m=n(9763),f=n(8874),v=n(4081),h=n(819),p=n(715),x=n(5550),g=n(9222),C=n(2927),y=n(6412),S=n(1308);function j(e){let{courses:t,handleClose:n,isCart:j}=e,{reactPixel:_}=(0,C.useReactPixel)(),{setOrderCart:P,setOrderEnroll:O}=(0,S.useOrder)(),[Z,w]=(0,o.useState)({name:"",email:""}),A=["name","email"],[R,I]=(0,o.useState)({name:"",email:""});async function N(e){let r,l;e.preventDefault(),q(!0);let i=(r={},l=!1,Object.keys(Z).forEach(e=>{let t="";A.includes(e)&&(t=(0,s.l)(Z[e])),t||"email"!=e||(t=(0,s.o)(Z[e])),t&&(l=!0),r[e]=t}),I(r),l);if(!i){B(!0);try{let e=await g.Z.post(m.T5+"buy-courses",{customer:Z,courses:t}),r=e.data.checkouts[0].payment_url;if(!r)throw Error("error");j?P(e.data.id,t):O(e.data.id,t),(0,y.qt)(_,t,Z,e.data.id),window.open(r,"_blank"),n()}catch(e){b(!0)}finally{B(!1)}}}let[E,b]=(0,o.useState)(!1),[k,q]=(0,o.useState)(!1),[T,B]=(0,o.useState)(!1);function L(e){w({...Z,[e.target.name]:e.target.value});let t=(0,s.l)(e.target.value);t||"email"!=e.target.name||(t=(0,s.o)(e.target.value)),I({...R,[e.target.name]:t})}return(0,r.jsxs)(r.Fragment,{children:[T&&(0,r.jsx)("div",{className:"w-screen z-40  h-screen fixed top-0 left-0 flex justify-center items-center",children:(0,r.jsx)(u.Z,{sx:{color:"#000"}})}),(0,r.jsx)(d.Z,{open:E,autoHideDuration:6e3,onClose:()=>b(!1),children:(0,r.jsx)(a.Z,{onClose:()=>b(!1),severity:"error",sx:{width:"100%"},variant:"filled",elevation:6,children:"Ocorreu um erro inesperado, comunique-se com nossa equipe"})}),(0,r.jsx)("form",{className:"w-full",children:(0,r.jsx)(c.Z,{width:"100%",component:"form",method:"post",className:"px-0",autoComplete:"off",children:(0,r.jsxs)(c.Z,{children:[(0,r.jsx)(l.Z,{className:"text-center sm:text-start font-bold",gutterBottom:!0,mb:2,children:"Informe seus dados"}),(0,r.jsxs)(f.ZP,{container:!0,spacing:1.5,children:[(0,r.jsx)(f.ZP,{item:!0,xs:12,children:(0,r.jsxs)(v.Z,{error:!!(k&&R.name),variant:"standard",fullWidth:!0,children:[(0,r.jsx)(h.Z,{htmlFor:"name",children:"Nome Completo"}),(0,r.jsx)(p.Z,{fullWidth:!0,name:"name",onChange:L}),k&&(0,r.jsx)(x.Z,{children:R.name})]})}),(0,r.jsx)(f.ZP,{item:!0,xs:12,children:(0,r.jsxs)(v.Z,{error:!!(k&&R.email),variant:"standard",fullWidth:!0,children:[(0,r.jsx)(h.Z,{htmlFor:"email",children:"Email"}),(0,r.jsx)(p.Z,{fullWidth:!0,type:"email",name:"email",onChange:L}),k&&(0,r.jsx)(x.Z,{children:R.email})]})}),(0,r.jsx)(f.ZP,{container:!0,item:!0,justifyContent:"center",xs:12,mt:4,children:(0,r.jsx)(i.A,{variant:"shadow",className:"w-full bg-black text-white uppercase font-bold",onClick:e=>{N(e)},children:"Realizar Pagamento"})})]})]})})})]})}},4128:function(e,t,n){n.d(t,{e:function(){return r}});let r=Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL"})},8786:function(e,t,n){n.d(t,{l:function(){return r},o:function(){return l}});let r=e=>e&&e.trim()?"":"Campo obrigat\xf3rio",l=e=>String(e).toLowerCase().match(/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|.(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/)?"":"Email inv\xe1lido"},6412:function(e,t,n){n.d(t,{Cz:function(){return r},NW:function(){return a},VO:function(){return c},Xq:function(){return d},af:function(){return v},e_:function(){return m},f9:function(){return u},hP:function(){return f},qt:function(){return s}});let r=795890068897751,l={ViewContent:"ViewContent",AddToCart:"AddToCart",InitiateCheckout:"InitiateCheckout",Purchase:"Purchase"},i=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&e.track(t,n)},o=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e&&e.trackCustom(t,n)},a=(e,t)=>{o(e,"AtivarSon",t?{video:t}:{})},u=(e,t)=>{o(e,"VerVideo",t?{video:t}:{})},c=(e,t)=>{(null==t?void 0:t.text)&&i(e,l.ViewContent,{contents:[{id:t.text.trim().replaceAll(" ","_"),quantity:1}],content_type:"course",value:t.price||0,currency:"BRL"})},d=(e,t)=>{var n;if(!(null==t?void 0:t.length))return;let r=0;for(let e=0;e<t.length;e++)r+=((null===(n=t[e].item)||void 0===n?void 0:n.price)||0)*t[e].cant;i(e,l.AddToCart,{contents:t.map(e=>({id:e.item.text.trim().replaceAll(" ","_"),quantity:e.cant})),content_type:"course",value:r||0,currency:"BRL"})},s=(e,t,n,r)=>{var o;if(!(null==t?void 0:t.length))return;let a=0;for(let e=0;e<t.length;e++)a+=((null===(o=t[e].item)||void 0===o?void 0:o.price)||0)*t[e].cant;i(e,l.InitiateCheckout,{contents:t.map(e=>({id:e.item.text.trim().replaceAll(" ","_"),quantity:e.cant})),content_type:"course",value:a||0,currency:"BRL",customer:n,orderId:r,orderId:r})},m=(e,t)=>{var n;if(!(null==t?void 0:t.length))return;let r=0;for(let e=0;e<t.length;e++)r+=((null===(n=t[e].item)||void 0===n?void 0:n.price)||0)*t[e].cant;i(e,l.Purchase,{contents:t.map(e=>({id:e.item.text.trim().replaceAll(" ","_"),quantity:e.cant})),content_type:"course",value:r||0,currency:"BRL"})},f=(e,t)=>{var n;if(!(null==t?void 0:t.length))return;let r=0;for(let e=0;e<t.length;e++)r+=((null===(n=t[e].item)||void 0===n?void 0:n.price)||0)*t[e].cant;o(e,"ViuCarrinho",{contents:t.map(e=>({id:e.item.text.trim().replaceAll(" ","_"),quantity:e.cant})),content_type:"course",value:r||0,currency:"BRL"})},v=(e,t)=>{o(e,"Matricula",{contents:[{id:t.text.trim().replaceAll(" ","_"),quantity:1}],content_type:"course",value:t.price||0,currency:"BRL"})}}}]);